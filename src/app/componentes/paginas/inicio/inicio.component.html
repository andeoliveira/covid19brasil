<form [formGroup]="form" class="home">
  <div class="home-left">
    <div class="header fadeInUp" style="animation-delay: 1s;">
      <div class="header-mid">
        <div class="titles">
          <h1>Brasil COVID 19 Dados</h1>
          <h6 style="font-weight: 600;">Uma iniciativa open-source</h6>
        </div>
        <div class="last-update">
          <h6>Última atualização</h6>
          <h6 style="color: rgb(40, 167, 69); font-weight: 600;">{{this.form.get('dataUltAtualizacao')?.value}}</h6>
        </div>
      </div>
    </div>
    <div class="Level">
      <div class="level-item is-cherry fadeInUp" style="animation-delay: 1s;">
        <h5>Confirmados</h5>
        <h4>[+{{form.getRawValue()?.confirmadosDia}}]</h4>
        <h1>{{form.getRawValue().confirmados}}</h1>
      </div>
      <div class="level-item is-blue fadeInUp" style="animation-delay: 1.1s;">
        <h5 class="heading">Ativos</h5>
        <h4>&nbsp;</h4>
        <h1 class="title has-text-info">{{form.getRawValue().ativos}}</h1>
      </div>
      <div class="level-item is-green fadeInUp" style="animation-delay: 1.2s;">
        <h5 class="heading">Recuperados</h5>
        <h4>&nbsp;</h4>
        <h1 class="title has-text-success">{{form.getRawValue().recuperados}} </h1>
      </div>
      <div class="level-item is-gray fadeInUp" style="animation-delay: 1.3s;">
        <h5 class="heading">Óbitos</h5>
        <h4>[+{{form.getRawValue().obitosDia}}]</h4>
        <h1 class="title has-text-grey">{{form.getRawValue()?.obitos}}</h1>
      </div>
    </div>
    <div class="Minigraph">
      <div class="svg-parent fadeInUp" style="animation-delay: 1.4s;">
        <svg width="100" height="100" viewBox="0 0 100 100"preserveAspectRatio="xMidYMid meet">
          <path fill="none" stroke="#ff073a99" stroke-width="3" cursor="pointer" d="M0,36.831228473019515C0,36.831228473019515,3.1578947368421053,35.72139303482587,4.7368421052631575,35.68312284730195C6.31578947368421,35.64485265977803,7.894736842105263,36.540375047837735,9.473684210526315,36.601607347876005C11.052631578947368,36.662839647914275,12.63157894736842,36.04286261002679,14.210526315789473,36.05051664753157C15.789473684210526,36.05817068503636,17.36842105263158,37.160352085725215,18.94736842105263,36.647531572904704C20.52631578947368,36.13471106008419,22.105263157894736,33.49406812093379,23.684210526315788,32.97359357060849C25.26315789473684,32.4531190202832,26.842105263157894,33.23383084577115,28.421052631578945,33.52468427095293C29.999999999999996,33.81553769613471,31.57894736842105,35.0937619594336,33.1578947368421,34.71871412169919C34.73684210526316,34.34366628396479,36.315789473684205,32.7363184079602,37.89473684210526,31.2743972445465C39.473684210526315,29.8124760811328,41.05263157894736,27.738231917336392,42.63157894736842,25.94718714121699C44.21052631578947,24.156142365097587,45.78947368421052,21.90585533869116,47.368421052631575,20.528128587830082C48.94736842105263,19.150401836969003,50.526315789473685,18.721775736701108,52.10526315789474,17.680826636050515C53.684210526315795,16.639877535399922,55.263157894736835,14.99425947187141,56.84210526315789,14.28243398392652C58.421052631578945,13.570608495981629,60,13.754305396096443,61.578947368421055,13.409873708381173C63.15789473684211,13.065442020665904,64.73684210526315,11.526980482204362,66.3157894736842,12.215843857634901C67.89473684210526,12.90470723306544,69.47368421052632,17.29812476081133,71.05263157894737,17.54305396096441C72.63157894736842,17.78798316111749,74.21052631578947,14.267125908916954,75.78947368421052,13.685419058553387C77.36842105263158,13.10371220818982,78.94736842105263,15.889781859931112,80.52631578947368,14.052812858783007C82.10526315789474,12.215843857634901,83.68421052631578,5.005740528128589,85.26315789473684,2.6636050516647547C86.84210526315789,0.32146957520092023,90,0,90,0" stroke-dasharray="113.32219696044922 113.32219696044922" stroke-dashoffset="0"></path>
          <circle fill="#ff073a" stroke="#ff073a" r="2" cursor="pointer" cx="90" cy="0" style="opacity: 1;"></circle>
        </svg>
      </div>
      <div class="svg-parent is-blue fadeInUp" style="animation-delay: 1.5s;">
        <svg width="100" height="100" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid meet">
          <path fill="none" cursor="pointer" stroke="#007bff99" stroke-width="3" d="M0,36.969001148105626C0,36.969001148105626,3.1578947368421053,35.80558744737849,4.7368421052631575,35.86681974741676C6.31578947368421,35.92805204745503,7.894736842105263,37.27516264829698,9.473684210526315,37.33639494833525C11.052631578947368,37.39762724837352,12.63157894736842,36.25717566016073,14.210526315789473,36.234213547646384C15.789473684210526,36.211251435132034,17.36842105263158,37.52774588595484,18.94736842105263,37.19862227324914C20.52631578947368,36.86949866054344,22.105263157894736,34.75698430922312,23.684210526315788,34.259471871412174C25.26315789473684,33.76195943360123,26.842105263157894,33.98392652123996,28.421052631578945,34.21354764638347C29.999999999999996,34.44316877152698,31.57894736842105,35.73670110983544,33.1578947368421,35.637198622273246C34.73684210526316,35.537696134711055,36.315789473684205,35.086107921928814,37.89473684210526,33.61653272101033C39.473684210526315,32.146957520091846,41.05263157894736,28.802143130501342,42.63157894736842,26.819747416762347C44.21052631578947,24.83735170302335,45.78947368421052,22.95445847684654,47.368421052631575,21.72215843857635C48.94736842105263,20.48985840030616,50.526315789473685,20.260237275162652,52.10526315789474,19.42594718714122C53.684210526315795,18.591657099119786,55.263157894736835,17.190968235744354,56.84210526315789,16.71641791044776C58.421052631578945,16.241867585151166,60,16.831228473019518,61.578947368421055,16.578645235361655C63.15789473684211,16.326061997703793,64.73684210526315,14.420206659012631,66.3157894736842,15.200918484500576C67.89473684210526,15.981630309988521,69.47368421052632,20.734787600459246,71.05263157894737,21.262916188289324C72.63157894736842,21.791044776119403,74.21052631578947,18.68350554917719,75.78947368421052,18.369690011481055C77.36842105263158,18.055874473784918,78.94736842105263,21.10983543819365,80.52631578947368,19.380022962112516C82.10526315789474,17.650210486031384,83.68421052631578,9.881362418675852,85.26315789473684,7.99081515499426C86.84210526315789,6.100267891312667,90,8.036739380022961,90,8.036739380022961" stroke-dasharray="112.5548095703125 112.5548095703125" stroke-dashoffset="0"></path>
          <circle fill="#007bff" stroke="#007bff" r="2" cursor="pointer" cx="90" cy="8.036739380022961" style="opacity: 1;"></circle>
        </svg>
      </div>
      <div class="svg-parent is-green fadeInUp" style="animation-delay: 1.6s;">
        <svg width="100" height="100" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid meet">
          <path fill="none" stroke="#28a74599" stroke-width="3" cursor="pointer" d="M0,40C0,40,3.1578947368421053,40.02296211251435,4.7368421052631575,39.908151549942595C6.31578947368421,39.79334098737084,7.894736842105263,39.31879066207424,9.473684210526315,39.31113662456946C11.052631578947368,39.30348258706467,12.63157894736842,39.80099502487562,14.210526315789473,39.86222732491389C15.789473684210526,39.92345962495216,17.36842105263158,39.846919249904325,18.94736842105263,39.678530424799085C20.52631578947368,39.510141599693846,22.105263157894736,38.87485648679679,23.684210526315788,38.85189437428244C25.26315789473684,38.82893226176809,26.842105263157894,39.4795254496747,28.421052631578945,39.540757749712974C29.999999999999996,39.601990049751244,31.57894736842105,39.410639112131655,33.1578947368421,39.21928817451206C34.73684210526316,39.02793723689246,36.315789473684205,38.36203597397627,37.89473684210526,38.392652123995404C39.473684210526315,38.42326827401454,41.05263157894736,39.28052047455032,42.63157894736842,39.40298507462686C44.21052631578947,39.5254496747034,45.78947368421052,39.1963260619977,47.368421052631575,39.127439724454646C48.94736842105263,39.05855338691159,50.526315789473685,39.14274779946422,52.10526315789474,38.98966704936854C53.684210526315795,38.83658629927287,55.263157894736835,38.469192499043245,56.84210526315789,38.208955223880594C58.421052631578945,37.94871794871794,60,37.45885954841179,61.578947368421055,37.42824339839265C63.15789473684211,37.39762724837352,64.73684210526315,38.09414466130884,66.3157894736842,38.02525832376578C67.89473684210526,37.95637198622273,69.47368421052632,37.25985457328741,71.05263157894737,37.01492537313433C72.63157894736842,36.76999617298125,74.21052631578947,36.792958285495594,75.78947368421052,36.5556831228473C77.36842105263158,36.318407960199,78.94736842105263,35.553004209720626,80.52631578947368,35.59127439724455C82.10526315789474,35.62954458476847,83.68421052631578,37.22158438576349,85.26315789473684,36.785304247990815C86.84210526315789,36.34902411021814,90,32.97359357060849,90,32.97359357060849" stroke-dasharray="113.32219696044922 113.32219696044922" stroke-dashoffset="0"></path>
          <circle fill="#28a745" stroke="#28a745" r="2" cursor="pointer" cx="90" cy="32.97359357060849" style="opacity: 1;"></circle>
        </svg>
      </div>
      <div class="svg-parent is-gray fadeInUp" style="animation-delay: 1.7s;">
        <svg width="100" height="100" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid meet">
          <path fill="none" cursor="pointer" stroke="#6c757d99" stroke-width="3" d="M0,39.86222732491389C0,39.86222732491389,3.1578947368421053,39.892843474933024,4.7368421052631575,39.908151549942595C6.31578947368421,39.923459624952166,7.894736842105263,39.946421737466515,9.473684210526315,39.9540757749713C11.052631578947368,39.96172981247609,12.63157894736842,39.984691924990436,14.210526315789473,39.9540757749713C15.789473684210526,39.923459624952166,17.36842105263158,39.78568694986606,18.94736842105263,39.77037887485649C20.52631578947368,39.75507079984692,22.105263157894736,39.86222732491389,23.684210526315788,39.86222732491389C25.26315789473684,39.86222732491389,26.842105263157894,39.77037887485649,28.421052631578945,39.77037887485649C29.999999999999996,39.77037887485649,31.57894736842105,39.94642173746651,33.1578947368421,39.86222732491389C34.73684210526316,39.77803291236127,36.315789473684205,39.28817451205511,37.89473684210526,39.26521239954076C39.473684210526315,39.24225028702641,41.05263157894736,39.65556831228473,42.63157894736842,39.724454649827784C44.21052631578947,39.79334098737084,45.78947368421052,39.75507079984692,47.368421052631575,39.678530424799085C48.94736842105263,39.60199004975125,50.526315789473685,39.31879066207424,52.10526315789474,39.26521239954076C53.684210526315795,39.21163413700727,55.263157894736835,39.33409873708381,56.84210526315789,39.35706084959816C58.421052631578945,39.38002296211251,60,39.46421737466513,61.578947368421055,39.40298507462686C63.15789473684211,39.34175277458859,64.73684210526315,39.01262916188289,66.3157894736842,38.98966704936854C67.89473684210526,38.96670493685419,69.47368421052632,39.30348258706468,71.05263157894737,39.26521239954076C72.63157894736842,39.22694221201684,74.21052631578947,38.79066207424417,75.78947368421052,38.76004592422503C77.36842105263158,38.7294297742059,78.94736842105263,39.22694221201684,80.52631578947368,39.08151549942595C82.10526315789474,38.93608878683506,83.68421052631578,37.90279372368924,85.26315789473684,37.88748564867968C86.84210526315789,37.872177573670115,90,38.98966704936854,90,38.98966704936854" stroke-dasharray="90.49144744873047 90.49144744873047" stroke-dashoffset="0"></path><circle fill="#6c757d" stroke="#6c757d" r="2" cursor="pointer" cx="90" cy="38.98966704936854" style="opacity: 1;"></circle>
        </svg>
      </div>
    </div>
    <h5 class="table-fineprint fadeInUp" style="animation-delay: 1.5s;">Dados gerais por Estado (saude.gov.br)
      <a [routerLink]="['/sobre']">Saiba mais</a></h5>
      <table class="table fadeInUp" style="animation-delay: 1.8s;">
        <thead>
          <tr>
            <th class="sticky state-heading" (click)="ordernarPorEstado()">
              <div class="heading-content"><abbr title="Estado/Sigla">Estado</abbr>
                <div style="display: initial;">
                  <div [ngClass]="ordenacaoAscendente ? 'arrow-down' : 'arrow-up'"></div>
                </div>
              </div>
            </th>
            <th class="sticky">
              <div class="heading-content"><abbr class="" title="Confirmados">Confirmados</abbr>
                <div style="display: none;">
                  <div class="arrow-down"></div>
                </div>
              </div>
            </th>
            <th class="sticky">
              <div class="heading-content"><abbr class="" title="Óbitos">Óbitos</abbr>
                <div style="display: none;"><div class="arrow-down"></div></div>
              </div>
            </th>
            <th class="sticky">
              <div class="heading-content"><abbr class="" title="Taxa de mortalidade">Taxa Mortalidade</abbr>
                <div style="display: none;"><div class="arrow-down"></div></div>
              </div>
            </th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let estado of dadosAtuais; let i = index">
            <tr class="state" (click)="detalharEstado(estado, i)">
              <td style="font-weight: 600;">
                <div class="table__title-wrapper">
                  <span [ngClass]="estado.index === i ?
                  'dropdown rotateRightDown' : 'dropdown rotateDownRight'">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"  fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"   stroke-linejoin="round">
                    <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                  </span>
                  {{estado.state}}
                </div>
              </td>
              <td>
                <span class="deltas" style="color: rgb(255, 7, 58);" *ngIf="estado.diaAnterior &&
                estado.diaAnterior.confirmed && estado.confirmed !== estado.diaAnterior.confirmed ">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="12" y1="19" x2="12" y2="5"></line>
                    <polyline points="5 12 12 5 19 12"></polyline>
                  </svg>
                  {{estado.diaAnterior && estado.confirmed !== estado.diaAnterior.confirmed ?
                    (estado.confirmed - estado.diaAnterior.confirmed) : ''}}
                </span>
                <span class="table__count-text">{{estado.confirmed}}</span>
              </td>
              <td style="color: inherit;">
                <span class="deltas" style="color: rgb(108, 117, 125);"></span>
                <span class="table__count-text">{{estado.deaths}}</span>
              </td>
              <td style="color: inherit;">
                <span class="deltas" style="color: rgb(108, 117, 125);"></span>
                <span class="table__count-text">{{estado.death_rate}}</span>
              </td>
            </tr>
            <tr *ngIf="estado.index === i"  class="state-last-update">
              <td colspan="4">
                <div class="last-update">
                  <h6>Atualizado em:&nbsp;</h6>
                  <h6>{{estado.date |date: 'dd/MM/yyyy'}}</h6>
                </div>
              </td>
            </tr>
            <tr *ngIf="estado.index === i" style="animation-delay: 0.2s;" class="fadeInUp district-heading">
              <td colspan="2">
                <div class="heading-content"><abbr title="Cidade">Cidade</abbr>
                  <div style="display: initial;">
                    <div class="arrow-down"></div>
                  </div>
                </div>
              </td>
              <td colspan="2">
                <div class="heading-content">
                  <abbr class="" title="Confirmados">Confirmados</abbr>
                  <div style="display: initial;">
                    <div class="arrow-down"></div>
                  </div>
                </div>
              </td>
            </tr>
            <ng-container *ngIf="estado.index === i && form.get('municipios').value">
              <tr style="animation-delay: 0.7s;" class="fadeInUp district" *ngFor="let cidade of form.get('municipios').value; let i = index">
                <td colspan="2" style="font-weight: 600;">{{cidade.city}}</td>
                <td colspan="2">
                  <span class="table__count-text">{{cidade.confirmed}}</span>
                </td>
              </tr>
              <tr class="spacer" style="display: initial;">
                <td></td>
                <td></td>
                <td></td>
              </tr>
            </ng-container>
          </ng-container>
        </tbody>
      </table>
      <h5 class="table-fineprint fadeInUp" style="animation-delay: 1s;">27 Estados afetados</h5>
    </div>
    <div class="home-right"><div class="MapExplorer fadeInUp" style="animation-delay: 1.5s;"><div class="header">
      <h1>Brasil</h1>
      <h6>Para mais detalhes, passe o mouse sobre o estado no mapa.</h6>
    </div>
    <div class="map-stats">
      <div class="stats fadeInUp" style="animation-delay: 2s;">
        <h5>Confirmados</h5>
        <div class="stats-bottom">
          <h1>{{form.get('confirmadosEstado')?.value}}</h1>
          <h6></h6>
        </div>
      </div>
      <div class="stats is-gray fadeInUp" style="animation-delay: 2.3s;"><h5>Óbitos</h5>
        <div class="stats-bottom"><h1>{{form.get('obitosEstado')?.value}}</h1><h6></h6></div>
      </div>
    </div>
    <div class="meta fadeInUp" style="animation-delay: 2.4s;"><h2>{{form.get('estadoSigla')?.value}}</h2>
      <div class="last-update state-last-update"><h6>Última atualização</h6><h3 title="{{form.get('dataUltAtualizacao')?.value}}">{{form.get('dataUltAtualizacao')?.value}}</h3></div>
    </div>
    <div class="svg-parent fadeInUp" style="animation-delay: 2.5s;">
      <map *ngIf="form.get('confirmados').value && form.get('estados').value"
        [confirmados]="form.get('confirmados').value" [casosPorEstado]="form.get('estados').value"
        (estadoSelecionado)="atualizarInfoEstado($event)" style="width: 100%; text-align: center;">
      </map>
    </div>
    <div class="TimeSeries-Parent fadeInUp" style="animation-delay: 2.1s;">
      <div class="timeseries">
        <div class="svg-parent">
          <div class="stats">
            <h5 class="title">Qtd. casos confirmados por dia</h5>
          </div>
          <timeseries style="width: 100%;" *ngIf="this.dadosHistoricos && this.dadosHistoricos.length > 0" [dadosBrasil]="this.dadosHistoricos"></timeseries>
        </div>
      </div>
    </div>
    </div>
  </div>
</form>
